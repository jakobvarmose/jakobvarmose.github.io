{"version":3,"sources":["Media.js","MediaList.js","Home.js","LogIn.js","LogOut.js","Room.js","RoomList.js","Server.js","Register.js","User.js","UserCreate.js","UserList.js","App.js","index.js"],"names":["Media","homeserver","api2","useParams","domain","local","useState","Item","to","src","disabled","media","setMedia","a","value","moment","Modal","confirm","title","content","label","showTime","defaultValue","onChange","v","onOk","encodeURIComponent","Date","getTime","res","success","deleted","error","toString","useEffect","media2","users","user","name","res2","map","creator","console","log","onClick","columns","render","media_id","width","height","dataIndex","dataSource","Home","LogIn","onLogIn","matrixID","setMatrixID","password","setPassword","setHomeserver","setDisabled","username","startsWith","includes","substr","indexOf","e","target","Password","LogOut","userID","onLogOut","Room","roomID","room","setRoom","members","setMembers","homeservers","setHomeservers","Set","id","sort","canonical_alias","purge_up_to_ts","purge_id","status","Promise","resolve","setTimeout","TabPane","tab","key","Object","entries","member","RoomList","rooms","setRooms","from","rooms2","undefined","next_batch","room_id","sorter","b","joined_members","joined_local_members","version","Server","server","federation","setFederation","python_version","server_version","synapse","setSynapse","client","setClient","capabilities","setCapabilities","versions","unstable_features","keys","filter","JSON","stringify","available","default","Register","admin","setAdmin","sharedSecret","setSharedSecret","message","setMessage","fetch","method","json","nonce","TextEncoder","adminString","window","crypto","subtle","importKey","encode","hash","data","Uint8Array","sign","mac","body","Array","prototype","call","x","slice","join","errcode","checked","User2","setUser","devices","setDevices","deviceID","device_id","onClickChangePassword","deactivated","erase","joined_rooms","forEach","toISOString","last_seen_ts","deleteDevice","React","Component","UserCreate2","onCreateUser","UserList","onChangeActive","onChangeAdmin","self","modalCreateOpen","setModalCreateOpen","visible","okText","onCancel","App","state","accessToken","api","url","headers","Authorization","obj","ok","statusText","setState","type","identifier","initial_device_display_name","localStorage","setItem","access_token","user_id","refresh","active","prompt","onChangePassword","removeItem","getItem","this","Content","style","padding","backgroundColor","path","exact","children","User","MediaList","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.73517bf3.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { Breadcrumb } from 'antd';\n\nfunction Media({ homeserver, api2 }) {\n  let { domain, local } = useParams();\n  let [media, setMedia] = useState({});\n\n  /*useEffect(async () => {\n    const res2 = await api2('GET', `/_synapse/admin/v1/users/${encodeURIComponent(user.name)}/media`);\n    media2 = [...media2, ...res2.media.map(media => ({...media, creator: user.name}))];\n    console.log(res2);\n    setMedia(media2)\n  }, [])*/\n\n  return (\n    <div>\n      <p>\n        <Breadcrumb>\n          <Breadcrumb.Item>\n            <Link to=\"/\">Home</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n          <Link to=\"/media\">Media</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            {`mxc://${domain}/${local}`}\n          </Breadcrumb.Item>\n        </Breadcrumb>\n      </p>\n      <p><img src={`${homeserver}/_matrix/media/r0/download/${domain}/${local}`}/></p>\n    </div>\n  );\n}\n\nexport default Media;\n","import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Breadcrumb, Button, DatePicker, Form, Modal, Table } from 'antd';\nimport moment from 'moment';\n\nfunction Media({ homeserver, api2 }) {\n  let [disabled, setDisabled] = useState(false);\n\n  let [media, setMedia] = useState([]);\n\n  /*useEffect(async () => {\n    let from = 0;\n    let media2 = [];\n    while (from !== undefined) {\n      const res = await api2('GET', `/_synapse/admin/v1/rooms?from=${encodeURIComponent(from)}`);\n      for (let room of res.rooms) {\n        const res2 = await api2('GET', `/_synapse/admin/v1/room/${room.room_id}/media`);\n        media2 = [...media2, ...res2.local, ...res2.remote];\n        setMedia(media2)\n      }\n      from = res.next_batch;\n    }\n  }, []);*/\n  useEffect(async () => {\n    try {\n      let media2 = [];\n      const res = await api2('GET', `/_synapse/admin/v2/users?from=0&limit=10000&deactivated=true`);\n      for (let user of res.users) {\n        const res2 = await api2('GET', `/_synapse/admin/v1/users/${encodeURIComponent(user.name)}/media`);\n        media2 = [...media2, ...res2.media.map(media => ({...media, creator: user.name}))];\n        console.log(res2);\n        setMedia(media2)\n        console.log(media2)\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }, [])\n\n  async function onClickPurgeMediaCache() {\n    let value = moment();\n    Modal.confirm({\n      title: 'Purge media cache',\n      content: (\n        <>\n          This will delete all remote media before a given time.\n          <Form.Item label=\"Before\">\n            <DatePicker\n              showTime\n              defaultValue={value}\n              onChange={v => value = v}\n            ></DatePicker>\n          </Form.Item>\n        </>\n      ),\n      async onOk() {\n        try {\n          let res = await api2('POST',`/_synapse/admin/v1/purge_media_cache?before_ts=${encodeURIComponent(new Date(value).getTime())}`, {});\n          Modal.success({\n            content: `${res.deleted} items deleted`,\n          });\n        } catch(e) {\n          Modal.error({\n            content: e.toString(),\n          });\n        }\n      },\n    });\n  }\n\n  return (\n    <div>\n      <p>\n        <Breadcrumb>\n          <Breadcrumb.Item>\n            <Link to=\"/\">Home</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            Media\n          </Breadcrumb.Item>\n        </Breadcrumb>\n      </p>\n      <p>\n        <Button disabled={disabled} onClick={onClickPurgeMediaCache}>\n          Purge media cache\n        </Button>\n      </p>\n      <Table\n        columns={\n          [\n            {\n              render: ({media_id}) => (\n                <Link to={`/media/${homeserver}/${media_id}`}>\n                  <img width=\"32\" height=\"32\" src={`https://${homeserver}/_matrix/media/r0/thumbnail/${homeserver}/${media_id}?width=32&height=32`}/>\n                </Link>\n              ),\n            },\n            {\n              title: 'ID',\n              render: ({media_id}) => (\n                  <Link to={`/media/${homeserver}/${media_id}`}>mxc://{homeserver}/{media_id}</Link>\n              ),\n            },\n            {\n              title: 'Creator',\n              render: ({creator}) => <Link to={`/user/${creator}`}>{creator}</Link>,\n            },\n            {\n              title: 'Type',\n              dataIndex: 'media_type',\n            },\n            {\n              title: 'Size',\n              dataIndex: 'media_length',\n            },\n            {\n              title: 'Filename',\n              dataIndex: 'upload_name',\n            },\n          ]\n        }\n        dataSource={\n          media\n        }\n      />\n    </div>\n  );\n}\n\nexport default Media;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Breadcrumb } from 'antd';\n\nfunction Home({ api2 }) {\n  return (\n    <div>\n      <p>\n        <Breadcrumb>\n          <Breadcrumb.Item>\n            Home\n          </Breadcrumb.Item>\n        </Breadcrumb>\n      </p>\n      <p><Link to=\"/user\">Users</Link> | <Link to=\"/room\">Rooms</Link> | <Link to=\"/media\">Media</Link> | <Link to=\"/server\">Server info</Link></p>\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button, Form, Input } from 'antd';\n\nfunction LogIn({ onLogIn }) {\n  let [matrixID, setMatrixID] = useState('');\n  let [password, setPassword] = useState('');\n  let [homeserver, setHomeserver] = useState('');\n  let [disabled, setDisabled] = useState(false);\n  function onChangeMatrixID(e) {\n    setMatrixID(e.target.value);\n    if (e.target.value.indexOf(':') >=0) {\n      setHomeserver(e.target.value.substr(e.target.value.indexOf(':')+1));\n    }\n  }\n  function onChangePassword(e) {\n    setPassword(e.target.value);\n  }\n  function onChangeHomeserver(e) {\n    setHomeserver(e.target.value);\n  }\n  async function onClickLogIn() {\n    try {\n      setDisabled(true)\n      let username = matrixID;\n      if (username.startsWith('@') && username.includes(':')) {\n        username = username.substr(1, username.indexOf(':')-1)\n      }\n      await onLogIn(\n        username,\n        password,\n        homeserver,\n      );\n    } catch (e) {\n      //setMessage(e.toString());\n    }\n    setDisabled(false);\n  }\n  return (\n    <Form>\n      <h3>Log in</h3>\n      <Form.Item label=\"MatrixID\">\n        <Input disabled={disabled} value={matrixID} onChange={onChangeMatrixID}/>\n      </Form.Item>\n      <Form.Item label=\"Password\">\n        <Input.Password disabled={disabled} value={password} onChange={onChangePassword}/>\n      </Form.Item>\n      <Form.Item label=\"Homeserver\">\n        <Input disabled={disabled} value={homeserver} onChange={onChangeHomeserver}/>\n      </Form.Item>\n      <Form.Item>\n        <Button disabled={disabled} onClick={onClickLogIn}>Log in</Button>\n      </Form.Item>\n      <Form.Item>\n        <Link to=\"/register\">Register</Link>\n      </Form.Item>\n    </Form>\n  );\n}\n\nexport default LogIn;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button } from 'antd';\n\nfunction LogOut({ userID, onLogOut }) {\n  let [disabled, setDisabled] = useState(false);\n  async function onClickLogOut() {\n    setDisabled(true);\n    await onLogOut();\n    setDisabled(false);\n  }\n  return (\n    <p>\n      Logged in as <Link to={'/user/'+userID}>{userID}</Link> <Button disabled={disabled} onClick={onClickLogOut}>Log out</Button>\n    </p>\n  );\n}\n\nexport default LogOut;\n","import React, { useEffect, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { Breadcrumb, Button, Modal, Table, Tabs } from 'antd';\n\nfunction Room({ api2 }) {\n  let { roomID } = useParams();\n  let [room, setRoom] = useState({});\n  let [members, setMembers] = useState([]);\n  let [homeservers, setHomeservers] = useState([]);\n  useEffect(async () => {\n    let res = await api2('GET', `/_synapse/admin/v1/rooms/${encodeURIComponent(roomID)}`);\n    setRoom(res);\n    console.log(res);\n    let res2 = await api2('GET', `/_synapse/admin/v1/rooms/${encodeURIComponent(roomID)}/members`);\n    setMembers(res2.members);\n    setHomeservers([...new Set(res2.members.map(id => id.substr(id.indexOf(':') + 1)))].sort())\n  }, [roomID])\n\n  function onClickPurgeHistory() {\n    Modal.confirm({\n      title: `Purge history of ${room.canonical_alias || roomID}`,\n      content: `Do you want to purge the room history of ${room.canonical_alias || roomID}?`,\n      async onOk() {\n        let res = await api2('POST', `/_synapse/admin/v1/purge_history/${roomID}`, {\n          purge_up_to_ts: new Date().getTime(),\n        });\n        let {purge_id} = res;\n        let status = 'active'\n        while(status === 'active') {\n          await new Promise(resolve => setTimeout(resolve, 1000));\n          let res2 = await api2('GET', `/_synapse/admin/v1/purge_history_status/${purge_id}`);\n          status = res2.status;\n        }\n\n        if (status === 'complete') {\n          Modal.success({\n            content: 'Purge succeeded',\n          });\n        } else {\n          Modal.error({\n            content: 'Purge failed',\n          });\n        }\n      },\n    });\n  }\n\n  return (\n    <div>\n      <p>\n        <Breadcrumb>\n          <Breadcrumb.Item>\n            <Link to=\"/\">Home</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            <Link to=\"/room\">Rooms</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            {room.canonical_alias || roomID}\n          </Breadcrumb.Item>\n        </Breadcrumb>\n      </p>\n      <Button onClick={onClickPurgeHistory}>\n        Purge history\n      </Button>\n      <Tabs>\n        <Tabs.TabPane tab=\"Properties\" key=\"1\">\n          <Table\n            columns={\n              [\n                {\n                  title: 'Key',\n                  dataIndex: 0,\n                },\n                {\n                  title: 'Value',\n                  dataIndex: 1,\n                },\n              ]\n            }\n            dataSource={Object.entries(room)}\n          />\n        </Tabs.TabPane>\n        <Tabs.TabPane tab=\"Homeservers\" key=\"2\">\n          <Table\n            columns={\n              [\n                {\n                  title: 'Name',\n                },\n              ]\n            }\n            dataSource={homeservers}\n          />\n        </Tabs.TabPane>\n        <Tabs.TabPane tab=\"Members\" key=\"3\">\n        <Table\n            columns={\n              [\n                {\n                  title: 'MatrixID',\n                  render: member => <Link to={`/user/${member}`}>{member}</Link>,\n                },\n              ]\n            }\n            dataSource={members}\n          />\n        </Tabs.TabPane>\n      </Tabs>\n    </div>\n  );\n}\n\nexport default Room;\n","import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Breadcrumb, Table } from 'antd';\n\nfunction RoomList({ api2 }) {\n  let [rooms, setRooms] = useState([]);\n  useEffect(async () => {\n    let from = 0;\n    let rooms2 = [];\n    setRooms(rooms2);\n    while (from !== undefined) {\n      const res = await api2('GET', `/_synapse/admin/v1/rooms?order_by=joined_members&from=${encodeURIComponent(from)}`);\n      rooms2 = [...rooms2, ...res.rooms];\n      setRooms(rooms2);\n      from = res.next_batch;\n    }\n  }, [])\n  return (\n    <>\n      <p>\n        <Breadcrumb>\n          <Breadcrumb.Item>\n            <Link to=\"/\">Home</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            Rooms\n          </Breadcrumb.Item>\n        </Breadcrumb>\n      </p>\n      <Table\n        columns={\n          [\n            {\n              title: 'Alias',\n              render: ({room_id, canonical_alias}) => (\n                <Link to={`/room/${room_id}`}>{ canonical_alias || room_id}</Link>\n              ),\n              sorter: (a, b) => (a.canonical_alias||a.room_id) < (b.canonical_alias||b.room_id) ? -1 : (a.canonical_alias||a.room_id) > (b.canonical_alias||b.room_id) ? 1 : 0,\n            },\n            {\n              title: 'Name',\n              dataIndex: 'name',\n              sorter: (a, b) => a.name < b.name ? -1 : a.name > b.name ? 1 : 0,\n            },\n            {\n              title: 'Members',\n              dataIndex: 'joined_members',\n              sorter: (a, b) => a.joined_members - b.joined_members,\n            },\n            {\n              title: 'Local members',\n              dataIndex: 'joined_local_members',\n              sorter: (a, b) => a.joined_local_members - b.joined_local_members,\n            },\n            {\n              title: 'Version',\n              dataIndex: 'version',\n              sorter: (a, b) => a.version < b.version ? -1 : a.version > b.version ? 1 : 0,\n            },\n          ]\n        }\n        dataSource={\n          rooms\n        }\n      />\n    </>\n  );\n}\n\nexport default RoomList;\n","import React, { useEffect, useState } from \"react\";\nimport { Link } from 'react-router-dom';\nimport { Breadcrumb } from 'antd';\n\nfunction Server({api2}) {\n  let [federation, setFederation] = useState({\n    server: '',\n    version: '',\n  });\n  let [synapse, setSynapse] = useState({\n    python_version: '',\n    server_version: '',\n  });\n  let [client, setClient] = useState({});\n  let [capabilities, setCapabilities] = useState(null);\n  useEffect(async () => {\n    const res = await api2('GET', '/_matrix/federation/v1/version');\n    setFederation(res);\n  }, [])\n  useEffect(async () => {\n    const res = await api2('GET', '/_synapse/admin/v1/server_version');\n    setSynapse(res);\n  }, [])\n  useEffect(async () => {\n    const res = await api2('GET', '/_matrix/client/versions');\n    setClient(res);\n  }, [])\n  useEffect(async () => {\n    const res = await api2('GET', '/_matrix/client/r0/capabilities');\n    setCapabilities(res.capabilities);\n  }, [])\n\n  return (\n    <div>\n      <p>\n        <Breadcrumb>\n          <Breadcrumb.Item>\n            <Link to=\"/\">Home</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            Server info\n          </Breadcrumb.Item>\n        </Breadcrumb>\n      </p>\n      <p>Server: {federation.server.name}</p>\n      <p>Version: {synapse.server_version || federation.server.version}</p>\n      {synapse.python_version ?\n        <p>Python version: {synapse.python_version}</p>\n      :\n        null\n      }\n      {client.versions ?\n        <div>\n          <p>API versions:</p>\n          <ul>\n            {client.versions.map(version => (\n              <li key={version}>{version}</li>\n            ))}\n          </ul>\n        </div>\n      :\n        null\n      }\n      {client.unstable_features ?\n        <div>\n          <p>Unstable features:</p>\n          <ul>\n            {Object.keys(client.unstable_features).filter(key => client.unstable_features[key]).map(key => (\n              <li key={key}>{key}</li>\n            ))}\n          </ul>\n        </div>\n      :\n        null\n      }\n      {capabilities ?\n        <div>\n          <p>Capabilities:</p>\n          <ul>\n            {\n              Object.keys(capabilities).filter(key => key !== 'm.room_versions').sort().map(key => (\n                <li key={key}>{key}: {JSON.stringify(capabilities[key])}</li>\n              ))\n            }\n          </ul>\n          {capabilities['m.room_versions'] ?\n            <div>\n              <p>Room Versions:</p>\n              <ul>\n                {Object.keys(capabilities['m.room_versions'].available).sort().map(key => (\n                  <li key={key}>{key}: {capabilities['m.room_versions'].available[key]}{key === capabilities['m.room_versions'].default ? ' (default)' : ''}</li>\n                ))}\n              </ul>\n            </div>\n          :\n            null\n          }\n        </div>\n      :\n        null\n      }\n    </div>\n  );\n}\n\nexport default Server;\n","import React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button, Checkbox, Form, Input } from 'antd';\n\nfunction Register({ onLogIn }) {\n\n  let [matrixID, setMatrixID] = useState('');\n  let [password, setPassword] = useState('');\n  let [homeserver, setHomeserver] = useState('');\n  let [admin, setAdmin] = useState(false);\n  let [sharedSecret, setSharedSecret] = useState('');\n  let [message, setMessage] = useState('');\n  let [disabled, setDisabled] = useState(false);\n\n  function onChangeMatrixID(e) {\n    setMatrixID(e.target.value);\n    if (e.target.value.indexOf(':') >=0) {\n      setHomeserver(e.target.value.substr(e.target.value.indexOf(':')+1));\n    }\n  }\n  function onChangePassword(e) {\n    setPassword(e.target.value);\n  }\n  function onChangeHomeserver(e) {\n    setHomeserver(e.target.value);\n  }\n  function onChangeAdmin(e) {\n    let value = e.target.checked;\n    setAdmin(value);\n  }\n  function onChangeSharedSecret(e) {\n    setSharedSecret(e.target.value);\n  }\n  async function onClickRegister() {\n    try {\n      setMessage('');\n      let username = matrixID;\n      if (username.startsWith('@') && username.includes(':')) {\n        username = username.substr(1, username.indexOf(':')-1)\n      }\n      const res = await (await fetch('https://' + homeserver + '/_synapse/admin/v1/register', {\n        method: 'GET',\n      })).json();\n      const nonce = res.nonce;\n      const e = new TextEncoder('utf-8')\n      const adminString = admin ? 'admin' : 'notadmin';\n      const key = await window.crypto.subtle.importKey('raw', e.encode(sharedSecret), {\n        name: 'HMAC',\n        hash: { name: 'SHA-1' },\n      }, false, ['sign']);\n      const data = new Uint8Array([\n        ...e.encode(nonce),\n        0x00,\n        ...e.encode(username),\n        0x00,\n        ...e.encode(password),\n        0x00,\n        ...e.encode(adminString),\n      ]);\n      const mac = await window.crypto.subtle.sign('HMAC', key, data);\n      const res2 = await (await fetch('https://' + homeserver + '/_synapse/admin/v1/register', {\n        method: 'POST',\n        body: JSON.stringify({\n          nonce: nonce,\n          username: username,\n          password: password,\n          admin: admin,\n          mac: Array.prototype.map.call(new Uint8Array(mac), x => ('0' + x.toString(16)).slice(-2)).join(''),\n        }),\n      })).json();\n      if ('errcode' in res2) {\n        setMessage(res2.errcode + ': ' + res2.error);\n      } else {\n        setMatrixID('');\n        setPassword('');\n        setAdmin(false);\n        setSharedSecret('');\n        await onLogIn(username, password, homeserver);\n      }\n    } catch(e) {\n      setMessage(e.toString());\n    }\n  }\n  return (\n    <Form>\n      <h3>Register</h3>\n      <Form.Item>\n\n      </Form.Item>\n      <Form.Item label=\"MatrixID\">\n        <Input disabled={disabled} value={matrixID} onChange={onChangeMatrixID}/>\n      </Form.Item>\n      <Form.Item label=\"Password\">\n        <Input.Password disabled={disabled} value={password} onChange={onChangePassword}/>\n      </Form.Item>\n      <Form.Item label=\"Homeserver\">\n        <Input disabled={disabled} value={homeserver} onChange={onChangeHomeserver}/>\n      </Form.Item>\n      <Form.Item>\n        <Checkbox disabled={disabled} checked={admin} onChange={onChangeAdmin}>Admin</Checkbox>\n      </Form.Item>\n      <Form.Item label=\"registration_shared_secret (from homeserver.yaml)\">\n        <Input id=\"sharedSecret\" disabled={disabled} value={sharedSecret} onChange={onChangeSharedSecret} />\n      </Form.Item>\n      <Form.Item>\n        {message}\n      </Form.Item>\n      <Form.Item>\n        <Button disabled={disabled} onClick={onClickRegister}>Register</Button>\n      </Form.Item>\n      <Form.Item>\n        <Link to=\"/\">Log in</Link>\n      </Form.Item>\n    </Form>\n  );\n}\n\nexport default Register;\n\n","import React, { useEffect, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { Breadcrumb, Button, Form, Input, Modal, Table, Tabs } from 'antd';\nimport Checkbox from 'antd/lib/checkbox/Checkbox';\n\nfunction User2({api2}) {\n  let {userID} = useParams();\n  let [user, setUser] = useState({});\n  let [rooms, setRooms] = useState([]);\n  let [devices, setDevices] = useState([]);\n\n  useEffect(async () => {\n    try {\n      let res = await api2('GET', '/_synapse/admin/v2/users/'+userID);\n      setUser({\n        ...user,\n        ...res,\n      });\n    } catch (e) {\n      console.error(e)\n    }\n  }, []);\n  useEffect(async () => {\n    try {\n      let res = await api2('GET', '/_synapse/admin/v2/users/'+userID+'/devices');\n      if ('devices' in res) {\n        setDevices(res.devices);\n      }\n    } catch (e) {\n      console.error(e)\n    }\n  }, []);\n  useEffect(async () => {\n    try {\n      let res = await api2('GET', '/_synapse/admin/v1/users/'+userID+'/joined_rooms');\n      if ('joined_rooms' in res) {\n        let rooms2 = res.joined_rooms.map(room_id => ({\n          room_id: room_id,\n        }));\n        setRooms(rooms2);\n        res.joined_rooms.forEach(async (room_id) => {\n          let res = await api2('GET', '/_synapse/admin/v1/rooms/'+room_id)\n          rooms2 = rooms2.map(room => {\n            if (room.room_id != res.room_id) {\n              return room;\n            }\n            return {\n              ...room,\n              ...res,\n            };\n          });\n          setRooms(rooms2);\n        })\n      }\n    } catch (e) {\n      console.error(e)\n    }\n  }, []);\n\n  async function deleteDevice(deviceID) {\n    await api2('POST', '/_synapse/admin/v2/users/'+userID+'/delete_devices', {\n      devices: [deviceID],\n    });\n    setDevices(devices.filter(({device_id}) => device_id !== deviceID));\n  };\n\n  async function onClickChangePassword() {\n    let password = '';\n    Modal.confirm({\n      title: `Change password for ${userID}`,\n      content: (\n        <>\n          <Form.Item label=\"New password\">\n            <Input.Password onChange={e => password = e.target.value}/>\n          </Form.Item>\n        </>\n      ),\n      async onOk() {\n        try {\n          if (!password) {\n            throw 'Empty password'\n          }\n          await api2('PUT', '/_synapse/admin/v2/users/'+userID, {\n            deactivated: false,\n            password: password,\n          });\n          setUser({\n            ...user,\n            deactivated: 0,\n          });\n        } catch (e) {\n          Modal.error({\n            content: e.toString(),\n          });\n        }\n      },\n    });\n  }\n  async function onClickDeactivate() {\n    let erase = false;\n    Modal.confirm({\n      title: `Deactivate ${userID}`,\n      content: (\n        <>\n          This will deactivate the account {userID}.\n          <Form.Item>\n            <Checkbox onChange={e => erase = e.target.checked}>Also erase</Checkbox>\n          </Form.Item>\n        </>\n      ),\n      async onOk() {\n        try {\n          await api2('POST', `/_synapse/admin/v1/deactivate/${encodeURIComponent(userID)}`, {\n            erase: erase,\n          });\n          setUser({\n            ...user,\n            deactivated: 1,\n          });\n        } catch (e) {\n          Modal.error({\n            content: e.toString(),\n          });\n        }\n      },\n    });\n  }\n  async function onClickMakeAdmin() {\n    await api2('PUT', `/_synapse/admin/v2/users/${encodeURIComponent(userID)}`, {\n      admin: true,\n    });\n    setUser({\n      ...user,\n      admin: 1,\n    })\n  }\n  async function onClickRemoveAdmin() {\n    try {\n      await api2('PUT', `/_synapse/admin/v2/users/${encodeURIComponent(userID)}`, {\n        admin: false,\n      });\n      setUser({\n        ...user,\n        admin: 0,\n      })\n    } catch (e) {\n      Modal.error({\n        content: e.toString(),\n      });\n    }\n  }\n  \n\n  return (\n    <div>\n      <div>\n        <p>\n          <Breadcrumb>\n            <Breadcrumb.Item>\n              <Link to=\"/\">Home</Link>\n            </Breadcrumb.Item>\n            <Breadcrumb.Item>\n              <Link to=\"/user\">Users</Link>\n            </Breadcrumb.Item>\n            <Breadcrumb.Item>\n              {userID}\n            </Breadcrumb.Item>\n          </Breadcrumb>\n        </p>\n        {\n          user.deactivated === 0 ?\n          <>\n          <Button onClick={onClickChangePassword}>\n            Change password\n          </Button>\n          <Button onClick={onClickDeactivate}>\n            Deactivate\n          </Button>\n          </> : null\n        }\n        {\n          user.deactivated === 1 ?\n          <Button onClick={onClickChangePassword}>\n            Activate and set password\n          </Button> : null\n        }\n        {\n          user.admin === 0 ?\n          <Button onClick={onClickMakeAdmin}>\n            Make admin\n          </Button> : null\n        }\n        {\n          user.admin === 1 ?\n          <Button onClick={onClickRemoveAdmin}>\n            Remove admin\n          </Button> : null\n        }\n        <Tabs>\n          <Tabs.TabPane tab=\"Properties\" key=\"1\">\n            <Table\n              columns={\n                [\n                  {\n                    title: 'Key',\n                    dataIndex: '0',\n                  },\n                  {\n                    title: 'Value',\n                    dataIndex: '1',\n                  },\n                ]\n              }\n              dataSource={Object.entries(user).map(([key, value]) => (\n                key === 'creation_ts' ?\n                  [key, new Date(user[key]*1000).toISOString()]\n                :\n                  [key, value]\n              ))}\n            />\n          </Tabs.TabPane>\n          <Tabs.TabPane tab=\"Devices\" key=\"2\">\n            <Table\n              columns={\n                [\n                  {\n                    title: 'ID',\n                    dataIndex: 'device_id',\n                  },\n                  {\n                    title: 'Name',\n                    dataIndex: 'display_name',\n                  },\n                  {\n                    title: 'Last seen',\n                    render: ({last_seen_ts}) => last_seen_ts?new Date(last_seen_ts).toISOString():'',\n                  },\n                  {\n                    title: 'IP address',\n                    dataIndex: 'last_seen_ip',\n                  },\n                  {\n                    render: ({device_id}) => (\n                      <Button onClick={() => deleteDevice(device_id)}>Delete</Button>\n                    )\n                  }\n                ]\n              }\n              dataSource={devices}\n            />\n          </Tabs.TabPane>\n          <Tabs.TabPane tab=\"Joined rooms\" key=\"3\">\n            <Table\n              columns={\n                [\n                  {\n                    title: 'ID',\n                    render: ({room_id, canonical_alias}) => (\n                      <Link to={`/room/${room_id}`}>{canonical_alias?canonical_alias:room_id}</Link>\n                    )\n                  },\n                  {\n                    title: 'Name',\n                    dataIndex: 'name',\n                  },\n                  {\n                    title: 'Members',\n                    dataIndex: 'joined_members',\n                  },\n                  {\n                    title: 'Version',\n                    dataIndex: 'version',\n                  },\n                ]\n              }\n              dataSource={rooms}\n            />\n          </Tabs.TabPane>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n\nexport default User2;\n","import React, { useState } from \"react\";\nimport { Link } from 'react-router-dom';\nimport { Breadcrumb, Button, Checkbox, Form, Input } from \"antd\";\n\nfunction UserCreate2({ onCreateUser }) {\n  let [matrixID, setMatrixID] = useState('');\n  let [password, setPassword] = useState('');\n  let [admin, setAdmin] = useState(false);\n\n  function onClickCreateUser() {\n    onCreateUser(matrixID, password, admin);\n  };\n  function onChangeMatrixID(e) {\n    setMatrixID(e.target.value);\n  };\n  function onChangePassword(e) {\n    setPassword(e.target.value);\n  };\n  function onChangeAdmin(e) {\n    setAdmin(e.target.checked);\n  };\n  \n\n  return (\n    <div>\n      <p>\n        <Breadcrumb>\n          <Breadcrumb.Item>\n            <Link to=\"/\">Home</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            <Link to=\"/user\">Users</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            Create\n          </Breadcrumb.Item>\n        </Breadcrumb>\n      </p>\n      <Form>\n        <Form.Item label=\"MatrixID\">\n          <Input value={matrixID} onChange={onChangeMatrixID}/>\n        </Form.Item>\n        <Form.Item label=\"Password\">\n          <Input.Password value={password} onChange={onChangePassword}/>\n        </Form.Item>\n        <Form.Item>\n          <Checkbox checked={admin} onChange={onChangeAdmin}>Admin</Checkbox>\n        </Form.Item>\n        <Form.Item>\n          <Button onClick={onClickCreateUser}>Create</Button>\n        </Form.Item>\n      </Form>\n    </div>\n  );\n}\n\nclass UserCreate extends React.Component {\n  state = {\n    matrixID: '',\n    password: '',\n    admin: false,\n  };\n  onCreateUser = () => {\n    this.props.onCreateUser(this.state.matrixID, this.state.password, this.state.admin);\n  };\n  onChangeValue = (e) => {\n    this.setState({\n      [e.target.id]: e.target.value,\n    });\n  };\n  onChangeChecked = (e) => {\n    this.setState({\n      [e.target.id]: e.target.checked,\n    });\n  };\n  render() {\n    return (\n      <div>\n        <p>\n          <Breadcrumb>\n            <Breadcrumb.Item>\n              <Link to=\"/\">Home</Link>\n            </Breadcrumb.Item>\n            <Breadcrumb.Item>\n              <Link to=\"/user\">Users</Link>\n            </Breadcrumb.Item>\n            <Breadcrumb.Item>\n              Create\n            </Breadcrumb.Item>\n          </Breadcrumb>\n        </p>\n        <Form>\n          <Form.Item label=\"MatrixID\">\n            <Input id=\"matrixID\" value={this.state.matrixID} onChange={this.onChangeValue}/>\n          </Form.Item>\n          <Form.Item label=\"Password\">\n            <Input.Password id=\"password\" value={this.state.password} onChange={this.onChangeValue}/>\n          </Form.Item>\n          <Form.Item>\n            <Checkbox\n            id=\"admin\"\n            checked={this.state.admin} onChange={this.onChangeChecked}\n                        >Admin</Checkbox>\n          </Form.Item>\n          <Form.Item>\n            <Button onClick={this.onCreateUser}>Create</Button>\n          </Form.Item>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default UserCreate2;\n","import React, { useState } from \"react\";\nimport { Link } from 'react-router-dom';\nimport { Breadcrumb, Button, Checkbox, Dropdown, Form, Input, Modal, Table, Menu } from \"antd\";\n\nimport UserCreate from './UserCreate';\n\nfunction UserList({users, onCreateUser, onChangeActive, onChangeAdmin, self}) {\n  let [modalCreateOpen, setModalCreateOpen] = useState();\n\n  let [matrixID, setMatrixID] = useState('');\n  let [password, setPassword] = useState('');\n  let [admin, setAdmin] = useState(false);\n\n  function onClickCreateUser() {\n    onCreateUser(matrixID, password, admin);\n  };\n  function onChangeMatrixID(e) {\n    setMatrixID(e.target.value);\n  };\n  function onChangePassword(e) {\n    setPassword(e.target.value);\n  };\n  function onChangeAdmin(e) {\n    setAdmin(e.target.checked);\n  };\n\n  return (\n    <div>\n      <Modal visible={modalCreateOpen} okText=\"Create\" onCancel={() => setModalCreateOpen(false)} onOk={onClickCreateUser}\n      >\n        <Form>\n          <Form.Item label=\"MatrixID\">\n            <Input value={matrixID} onChange={onChangeMatrixID}/>\n          </Form.Item>\n          <Form.Item label=\"Password\">\n            <Input.Password value={password} onChange={onChangePassword}/>\n          </Form.Item>\n          <Form.Item>\n            <Checkbox checked={admin} onChange={onChangeAdmin}>Admin</Checkbox>\n          </Form.Item>\n        </Form>\n      </Modal>\n      <p>\n        <Breadcrumb>\n          <Breadcrumb.Item>\n            <Link to=\"/\">Home</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            Users\n          </Breadcrumb.Item>\n        </Breadcrumb>\n      </p>\n      <p>\n        <Button onClick={() => setModalCreateOpen(true)}>Create</Button>\n      </p>\n      <Table\n        columns={\n          [\n            {\n              title: 'MatrixID',\n              dataIndex: 'name',\n              render: matrixID => (\n                <Link to={'/user/'+matrixID}>\n                  {matrixID}\n                </Link>\n              ),\n            },\n            {\n              title: 'Name',\n              dataIndex: 'displayname',\n            },\n            {\n              title: 'Deactivated',\n              dataIndex: 'deactivated',\n            },\n            {\n              title: 'Guest',\n              dataIndex: 'is_guest',\n            },\n            {\n              title: 'Admin',\n              dataIndex: 'admin',\n            },\n            /*{\n              render: user => (\n                <Dropdown trigger=\"click\" overlay={\n                  <Menu>\n                    <Menu.Item>\n                      Make Admin\n                    </Menu.Item>\n                    <Menu.Item>\n                      Make Guest\n                    </Menu.Item>\n                    <Menu.Item>\n                      Deactivate\n                    </Menu.Item>\n                  </Menu>\n                }>\n                  <a>Modify</a>\n                </Dropdown>\n              ),\n            },*/\n          ]\n        }\n        dataSource={\n          users\n        }\n      />\n    </div>\n  )\n}\n\nexport default UserList;\n","import React from \"react\";\nimport { HashRouter as Router, Link, Route,Switch } from 'react-router-dom';\nimport { Layout } from 'antd';\n\nimport Media from './Media';\nimport MediaList from './MediaList';\nimport Home from './Home';\nimport LogIn from './LogIn';\nimport LogOut from './LogOut';\nimport Room from './Room';\nimport RoomList from './RoomList';\nimport Server from './Server';\nimport Register from './Register';\nimport User from './User';\nimport UserCreate from './UserCreate';\nimport UserList from './UserList';\n\nimport './App.css';\n\nclass App extends React.Component {\n  state = {\n    status: 'loading',\n    users: [],\n    homeserver: null,\n    accessToken: null,\n    userID: null,\n  };\n\n  api = async (method, url, body) => {\n    console.log('api', method, url)\n    const res = await fetch(this.state.homeserver+url, {\n      method: method,\n      headers: {\n\n      },\n      body: JSON.stringify(body)\n    });\n    return res.json();\n  }\n\n  api2 = async (method, url, body) => {\n    console.log('api2', method, url)\n    const res = await fetch(this.state.homeserver+url, {\n      method: method,\n      headers: {\n        Authorization: 'Bearer '+this.state.accessToken,\n      },\n      body: JSON.stringify(body)\n    });\n    let obj = await res.json();\n    if ('errcode' in obj) {\n      throw `${obj.errcode}: ${obj.error}`\n    }\n    if (!res.ok) {\n      throw `${obj.statusText}`;\n    }\n    return obj;\n  }\n\n  onLogIn = async (matrixID, password, homeserver) => {\n    this.setState({\n      homeserver: 'https://'+homeserver,\n    });\n    const res = await this.api('POST', '/_matrix/client/r0/login', {\n      type: 'm.login.password',\n      identifier: {\n        type: 'm.id.user',\n        user: matrixID,\n      },\n      password: password,\n      initial_device_display_name: 'NerveGear'\n    });\n    if ('access_token' in res) {\n      window.localStorage.setItem('mx_access_token', res.access_token);\n      window.localStorage.setItem('mx_user_id', res.user_id);\n      this.setState({\n        status: 'loggedin',\n        accessToken: res.access_token,\n        userID: res.user_id,\n      });\n      setTimeout(async () => {\n        await this.refresh();\n      });\n    }\n  };\n\n  onChange = (e) => {\n    this.setState({\n      [e.target.id]: e.target.value,\n    });\n  };\n\n  refresh = async () => {\n    console.log(this.state.status)\n    if (this.state.status === 'loggedin') {\n      console.log('refreAPI')\n      try {\n        const res = await this.api2('GET', '/_synapse/admin/v2/users?from=0&limit=10000&deactivated=true');\n        if ('users' in res) {\n          this.setState({\n            users: res.users,\n          });\n        }\n      } catch (e) {\n        console.log('error', e)\n      }\n    }\n  }\n\n  async componentDidMount() {\n    const accessToken = window.localStorage.getItem('mx_access_token')\n    if (accessToken) { \n      const userID = window.localStorage.getItem('mx_user_id');\n      let homeserver = userID.substr(userID.indexOf(':')+1)\n      this.setState({\n        status: 'loggedin',\n        accessToken: accessToken,\n        userID: userID,\n        homeserver: 'https://'+homeserver,\n      });\n    } else {\n      this.setState({\n        status: 'loggedout',\n      })\n    }\n    setTimeout(async () => {\n      await this.refresh();\n    });\n  }\n\n  onChangeAdmin = async (matrixID, admin) => {\n    await this.api2('PUT', '/_synapse/admin/v2/users/'+matrixID, {\n      admin: admin,\n    });\n    await this.refresh();\n  };\n\n  onChangeActive = async (matrixID, active) => {\n    if (active) {\n      const password = prompt('New password');\n      await this.api2('PUT', '/_synapse/admin/v2/users/'+matrixID, {\n        deactivated: false,\n        password: password,\n      });\n    } else {\n      await this.api2('POST', '/_synapse/admin/v1/deactivate/'+matrixID, {\n        erase: true,\n      });\n    }\n    await this.refresh();\n  };\n\n  onChangePassword = async (matrixID) => {\n    const password = prompt('New password');\n    await this.api2('PUT', '/_synapse/admin/v2/users/'+matrixID, {\n      password: password,\n    });\n    this.refresh();\n  }\n\n  onLogOut = async () => {\n    try {\n      await this.api2('POST', '/_matrix/client/r0/logout', {});\n    } catch (e) {\n      console.error(e);\n    }\n    window.localStorage.removeItem('mx_access_token');\n    window.localStorage.removeItem('mx_user_id');\n    this.setState({\n      status: 'loggedout',\n      users: [],\n      accessToken: null,\n      userID: null,\n    })\n  }\n\n  onCreateUser = async (matrixID, password, admin) => {\n    // TODO check if user already exists\n    console.log(matrixID, password, admin);\n    await this.api2('PUT', '/_synapse/admin/v2/users/'+matrixID, {\n      password: password,\n      admin: admin,\n    });\n    this.refresh();\n  }\n\n  render() {\n    return (\n      <Layout>\n        <Layout.Content style={{padding: '1em'}}>\n          <div style={{padding: '1em', backgroundColor: '#fff'}}>\n            <Router>\n              { this.state.status === 'loading' ?\n                <div>Loading...</div>\n              : this.state.status === 'loggedout' ?\n                <div>\n                  <Switch>\n                    <Route path=\"/register\">\n                      <Register\n                        onLogIn={this.onLogIn}\n                      />\n                    </Route>\n                    <Route>\n                      <LogIn\n                        onLogIn={this.onLogIn}\n                      />\n                    </Route>\n                  </Switch>\n                </div>\n              :\n                <div>\n                  <LogOut\n                    userID={this.state.userID}\n                    onLogOut={this.onLogOut}\n                  />\n                  <hr/>\n                  <Switch>\n                    <Route path=\"/user/create\" exact>\n                      <UserCreate\n                        onCreateUser={this.onCreateUser}\n                      />\n                    </Route>\n                    <Route path=\"/user/:userID\" children={\n                      <User\n                        users={this.state.users}\n                        api2={this.api2}\n                      />\n                    }/>\n                    <Route path=\"/media/:domain/:local\" children={\n                      <Media\n                        homeserver={this.state.homeserver}\n                        api2={this.api2}\n                      />\n                    }/>\n                    <Route path=\"/server\" exact>\n                      <Server\n                        api2={this.api2}\n                      />\n                    </Route>\n                    <Route path=\"/media\" exact>\n                      <MediaList\n                        api2={this.api2}\n                        homeserver={this.state.homeserver.substr(8)}\n                      />\n                    </Route>\n                    <Route path=\"/room\" exact children={\n                      <RoomList\n                        api2={this.api2}\n                      />\n                    }/>\n                    <Route path=\"/room/:roomID\" children={\n                      <Room\n                        api2={this.api2}\n                      />\n                    }/>\n                    <Route path=\"/user\" exact>\n                      <UserList\n                        self={this.state.matrixID}\n                        users={this.state.users}\n                        onChangeActive={this.onChangeActive}\n                        onChangeAdmin={this.onChangeAdmin}\n                        onChangePassword={this.onChangePassword}\n                      />\n                    </Route>\n                    <Route path=\"/\" exact>\n                      <Home/>\n                    </Route>\n                    <Route>\n                      <p><Link to=\"/user\">Users</Link></p>\n                    </Route>\n                  </Switch>\n                </div>\n              }\n            </Router>\n          </div>\n        </Layout.Content>\n      </Layout>\n    );\n  }\n}\n\nexport default App;\n","import 'antd/dist/antd.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}